---
import { generateMetadata } from '../utils/seo';
import WhatsAppButton from '../components/WhatsAppButton.astro';
import LoadingAnimation from '../components/LoadingAnimation.astro';

interface Props {
  title: string;
  description?: string;
  image?: string;
  url?: string;
  type?: string;
}

const { 
  title = 'Inicio',
  description = 'Soluciones de automatización para potenciar tu negocio',
  image = '/images/og-image.jpg',
  url = '/',
  type = 'website',
} = Astro.props;

const { meta, link } = generateMetadata({
  title,
  description,
  image,
  url,
  type,
});
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Metadatos dinámicos -->
    <title>{title} | Jaque</title>
    
    <!-- Meta tags dinámicos -->
    {meta.map(({ name, property, content }) => (
      <meta 
        {...(name && { name })}
        {...(property && { property })}
        content={content} 
      />
    ))}
    
    <!-- Enlaces dinámicos -->
    {link.map(({ rel, href, ...props }) => (
      <link rel={rel} href={href} {...props} />
    ))}
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" href="/favicon.png" />
    <meta name="theme-color" content="#0c4e7a" />
    
    <!-- Preload de fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    
    <!-- Estilos CSS -->
    <link rel="stylesheet" href="/styles/global.css" />
    
    <!-- Scripts de analíticas (opcional) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=TU-ID-DE-SEGUIMIENTO"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'TU-ID-DE-SEGUIMIENTO');
    </script> -->
  </head>
  <body class="min-h-screen bg-background text-gray-900 flex flex-col">
    <LoadingAnimation client:load />
    <slot />
    <WhatsAppButton client:load />
    
    <!-- Scripts de terceros -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        AOS.init({
          duration: 800,
          once: true,
          easing: 'ease-in-out',
          offset: 100
        });
      });
    </script>
  </body>
</html>

<style is:global>
  :root {
    --color-primary: 12 74 110;
    --color-primary-dark: 8 47 73;
    --color-primary-light: 56 189 248;
    --color-background: 241 245 249;
    --color-text: 30 41 59;
    --color-text-light: 71 85 105;
    --color-surface: 248 250 252;
  }
  
  html {
    @apply bg-background text-gray-900;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply min-h-screen bg-background transition-colors duration-200;
  }
  
  .dark {
    --color-background: 17 24 39;
    --color-text: 243 244 246;
    --color-text-light: 156 163 175;
  }
</style>
